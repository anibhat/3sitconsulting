var nc_sid,nc_name,wplc_cid,socket,lastTypingTime,FADE_TIME=150,TYPING_TIMER_LENGTH=1e3,username="Guest",connected=!1,typing=!1,nifty_is_chat_open=!1,nifty_chat_status="browsing",bleeper_show_drag_zone=!1,bleeper_recent_agents=void 0,bleeper_recent_agents_data=void 0,NIFTY_SOCKET_URI="https://bleeper.us-3.evennode.com";"undefined"!=typeof bleeper_end_point_override&&(NIFTY_SOCKET_URI=bleeper_end_point_override);var query_string="";"undefined"!=typeof bleeper_disable_mongo&&(query_string+="disable_mongo="+bleeper_disable_mongo),"undefined"!=typeof bleeper_pro_auth&&(query_string+="&pro_auth="+bleeper_pro_auth),"undefined"!=typeof bleeper_io_is_origin&&(query_string+="&bleeper_io_is_origin="+bleeper_io_is_origin),"undefined"!=typeof bleeper_user_ip_address&&(query_string+="&user_ip="+bleeper_user_ip_address),void 0!==bleeper_location_info&&!1!==bleeper_location_info&&void 0!==bleeper_location_info.code&&void 0!==bleeper_location_info.name&&(query_string+="&location_code="+bleeper_location_info.code+"&location_name="+bleeper_location_info.name),"undefined"!=typeof window&&void 0!==window.location&&void 0!==window.location.href&&(query_string+="&referer="+window.location.href),query_string=bleeper_query_cleanup(query_string);var bleeper_server_list=[];bleeper_server_list[0]="https://bleeper.us-3.evennode.com",bleeper_server_list[1]="https://bleeper-eu-1.eu-4.evennode.com",bleeper_server_list[2]="https://bleeper-eu-2.eu-4.evennode.com",bleeper_server_list[3]="https://bleeper-us-2.us-3.evennode.com";var nifty_chat_delegates,nifty_connect,bleeper_inactive_timeout,user_hearbeat,selectedIndexStart,selectedIndexEnd,lastmessagesent,bleeper_first,bleeper_current,bleeper_server_list_results=[],bleeper_ping=new Audio("https://bleeper.io/app/assets/ding.mp3"),bleeper_inactive=!1,bleeper_timeout_duration=3e5,agent_disc_timer=[],agent_joined=[],wplc_online=!1,nifty_is_minimized=!1,checkSelection=!0,niftyIsEditing=!1,nifty_welcome_message_sent=!1,$inputMessage="",$messages="",bleeper_disable_add_message=!1,bleeper_location_info=!1;function log(e,t){addMessageElement(jQuery("<li>").addClass("log").text(e),t)}function addNotice(e,t){var n="";(t=t||{}).is_admin?n+="<li class='message wplc-admin-notice' />":n+="<li class='message wplc-user-notice' />";var i=jQuery('<span class="noticeBody">').html(niftyFormatParser(e.message));addMessageElement(jQuery(n).append(i),t)}function addChatTyping(e){e.typing=!0,e.message="is typing",e.msgID="",addChatMessage(e)}function removeChatTyping(e){getTypingMessages(e).fadeOut(function(){jQuery(this).remove()})}function addMessageElement(e,t){var n=jQuery(e);t||(t={}),void 0===t.fade&&(t.fade=!0),void 0===t.prepend&&(t.prepend=!1),t.fade&&n.hide().fadeIn(FADE_TIME),t.prepend?$messages.prepend(n):$messages.append(n),$messages[0].scrollTop=$messages[0].scrollHeight}function updateTyping(){connected&&(niftyIsEditing||(typing||(typing=!0,socket.emit("typing",{chatid:wplc_cid})),lastTypingTime=(new Date).getTime(),setTimeout(function(){var e=(new Date).getTime();TYPING_TIMER_LENGTH<=e-lastTypingTime&&typing&&(socket.emit("stop typing",{chatid:wplc_cid}),typing=!1)},TYPING_TIMER_LENGTH)))}function cleanInput(e){var t=document.createElement("div");return t.innerHTML=e,t=t.textContent||t.innerText||""}function addChatMessage(e,t){if(bleeper_disable_add_message);else{var n=getTypingMessages(e);t=t||{},0!==n.length&&(t.fade=!1,n.remove());var i="";if("u"==e.aoru?i+="<li class='message wplc-user-message message_"+e.msgID+"' mid='"+e.msgID+"' />":i+="<li class='message wplc-admin-message message_"+e.msgID+"' mid='"+e.msgID+"' />",void 0!==e.timestamp){var r=new Date(parseInt(e.timestamp)),s=r.getHours(),o=r.getMinutes(),a=12<=s?"pm":"am",c=(s=(s%=12)||12)+":"+(o=o<10?"0"+o:o)+" "+a;e.timestamp=c}else e.timestamp="";var _=jQuery('<span class="username"/>: ').text(e.username);if("u"!==e.aoru)var l=jQuery('<span class=""/>: ').text("");else l=jQuery('<span class="bleeper-edit-message"/>: ').text("edit");var p=jQuery('<span class="timestamp"/>: ').text(e.timestamp),d=jQuery('<span class="messageBody" data-message="'+e.message+'">').html(niftyFormatParser(e.message)),u=e.typing?"typing":"",f=e.typing?jQuery("<span id='typing_preview'>"):"";addMessageElement(jQuery(i).data("username",e.username).addClass(u).append(_,p,l,d).append(" ").append(f),t)}}function getTypingMessages(t){return jQuery(".typing.message").filter(function(e){return jQuery(this).data("username")===t.username})}function sendMessage(e){if(e=cleanInput(e),"undefined"!=typeof bleeper_convert_colon_to_uni&&(e=bleeper_convert_colon_to_uni(e)),!1!==niftyIsEditing)n=parseInt(niftyIsEditing),jQuery(".message_"+n+" .messageBody").attr("data-message",e),jQuery(".message_"+n+" .messageBody").html(niftyFormatParser(e)),socket.emit("edit message",{message:e,chatid:wplc_cid,msgID:n}),jQuery.event.trigger({type:"bleeper_edited_message",ndata:{message:e,chatid:wplc_cid,msgID:n}}),jQuery("#wplc_chatmsg").val(""),niftyIsEditing=!1;else{var t=Math.floor(100*Math.random()+1),n=Date.now()+t,i={username:username,message:e,aoru:"u",msgID:lastmessagesent=n,is_admin:!1};jQuery.event.trigger({type:"bleeper_send_message",message:e,msg_id:n}),jQuery.event.trigger({type:"bleeper_new_message",ndata:i,msgID:n}),socket.emit("new message",{message:e,chatid:wplc_cid,msgID:n,aoru:"u"})}}function niftyUpdateStatusCookie(e){Cookies.set("nc_status",e,{expires:1,path:"/"})}function niftyUpdateGravCookie(e){Cookies.set("wplc_grav_hash",e,{expires:1,path:"/"}),wplc_cookie_grav_hash=e}function niftyUpdateUserDataCookies(e,t){Cookies.set("wplc_name",e,{expires:1,path:"/"}),Cookies.set("wplc_email",t,{expires:1,path:"/"}),wplc_cookie_name=e,wplc_cookie_email=t}jQuery(document).ready(function(){if(bleeper_powered_by(),bleeper_inactive_timeout=setTimeout(function(){bleeper_inactive=!0},bleeper_timeout_duration),"undefined"!=typeof bleeper_message_override&&(bleeper_ping=new Audio(bleeper_message_override)),bleeper_test_localStorage()){var e=new Date;e.toUTCString();var t=Math.floor(e.getTime()/1e3);null===localStorage.getItem("bleeper_first")?(localStorage.setItem("bleeper_first",t),bleeper_first=t):bleeper_first=localStorage.getItem("bleeper_first"),localStorage.setItem("bleeper_current",t),bleeper_current=t}"undefined"==typeof ns_obj||("1"===ns_obj.o?wplc_online=!0:(wplc_run=!1,wplc_online=!1)),wplc_check_minimize_cookie=Cookies.get("nifty_minimize");var n=-1;jQuery("html").bind("dragenter",function(){jQuery("#chat_drag_zone").fadeIn(),bleeper_show_drag_zone=!0}),jQuery("html").bind("dragover",function(){bleeper_show_drag_zone=!0}),jQuery("html").bind("dragleave",function(){bleeper_show_drag_zone=!1,clearTimeout(n),n=setTimeout(function(){bleeper_show_drag_zone||jQuery("#chat_drag_zone").fadeOut()},200)}),jQuery("#chat_drag_zone").on("dragover",function(e){e.preventDefault(),e.stopPropagation()}),jQuery("#chat_drag_zone").on("dragleave",function(e){e.preventDefault(),e.stopPropagation()}),jQuery("#chat_drag_zone").on("drop",function(e){e.preventDefault(),e.stopPropagation(),0<jQuery("#nifty_add_media:checked").length||jQuery("#nifty_add_media").click(),document.getElementById("nifty_file_input").files=e.originalEvent.dataTransfer.files,jQuery("#chat_drag_zone").fadeOut()}),nifty_chat_delegates=function(t){nifty_chat_status_temp=nc_getCookie("nc_status"),"undefined"!=typeof nifty_chat_status_temp&&"active"===nifty_chat_status_temp||niftyUpdateStatusCookie(t?"active":"browsing"),nifty_username_temp=nc_getCookie("nc_username"),"undefined"!=typeof nifty_username_temp&&(username=nifty_username_temp),socket.on("connect",function(e){nc_add_user(socket,e),nifty_chat_status_temp=nc_getCookie("nc_status"),"undefined"!=typeof nifty_chat_status_temp&&"active"===nifty_chat_status_temp&&void 0===user_hearbeat&&(user_hearbeat=setInterval(function(){socket.connected&&socket.emit("heartbeat")},5e3)),jQuery.event.trigger({type:"bleeper_socket_connected",status:nifty_chat_status_temp})}),socket.on("force_disconnect",function(e){socket.disconnect({test:"test"}),"undefined"!=typeof user_heartbeat&&clearInterval(user_hearbeat),user_heartbeat=void 0,setTimeout(function(){nifty_connect(!1)},12e3)}),socket.on("blacklisted",function(e){jQuery.event.trigger({type:"bleeper_blacklisted",ndata:e})}),socket.on("agent initiate",function(e){void 0===user_hearbeat&&(socket.emit("initiate received",{chatid:wplc_cid}),user_hearbeat=setInterval(function(){socket.connected&&socket.emit("heartbeat")},5e3)),niftyUpdateStatusCookie("active"),jQuery.event.trigger({type:"bleeper_agent_initiated_chat",ndata:e})}),socket.on("chat ended",function(e){jQuery.event.trigger({type:"bleeper_chat_ended_notification",ndata:e}),jQuery("#bleeper_chat_ended").show(),bleeper_end_chat_div_create(),"undefined"!=typeof user_heartbeat&&clearInterval(user_heartbeat),user_heartbeat=void 0,socket.disconnect({test:"test"}),niftyUpdateStatusCookie("browsing"),"undefined"!=typeof io&&(socket=io.connect(NIFTY_SOCKET_URI,{query:query_string,transports:["websocket"]}),nifty_chat_delegates()),"undefined"!=typeof Cookies&&Cookies.remove("wplc_cid")}),socket.on("recent_agents",function(e){void 0!==e&&void 0!==e.agents&&(bleeper_recent_agents=e.agents)}),socket.on("agent_data",function(e){void 0!==e&&void 0!==e.ndata&&(void 0===bleeper_recent_agents_data?(bleeper_recent_agents_data={})[e.ndata.aid]=e.ndata:bleeper_recent_agents_data[e.ndata.aid]=e.ndata)}),socket.on("transfer chat",function(e){addNotice({message:"You are being transferred to another agent. Please be patient."})}),socket.on("location found",function(e){bleeper_location_info=e}),socket.on("chat history",function(e){jQuery.event.trigger({type:"bleeper_chat_history",ndata:e})}),socket.on("login",function(e){if(connected=!0,t);}),socket.on("new message",function(e){jQuery.event.trigger({type:"bleeper_new_message",ndata:e}),"undefined"!=typeof wplc_enable_ding&&"1"===wplc_enable_ding&&bleeper_ping.play()}),socket.on("edit message",function(e){jQuery.event.trigger({type:"bleeper_edit_message",ndata:e})}),socket.on("user chat notification",function(e){jQuery.event.trigger({type:"bleeper_user_chat_notification",ndata:e})}),socket.on("custom data received",function(e){jQuery.event.trigger({type:"bleeper_custom_data_received",ndata:e})}),socket.on("socketid",function(e){document.cookie="nc_sid="+e.socketid}),socket.on("agent joined",function(e){clearTimeout(agent_disc_timer[e.agent]),jQuery.event.trigger({type:"bleeper_agent_joined",ndata:e})}),socket.on("new_socket",function(e){}),socket.on("agent left",function(e){jQuery.event.trigger({type:"bleeper_agent_left",ndata:e})}),socket.on("agent connected",function(e){clearTimeout(agent_disc_timer[e.aid])}),socket.on("agent disconnected",function(e){agent_disc_timer[e.aid]=setTimeout(function(){jQuery.event.trigger({type:"bleeper_agent_disconnected",ndata:e}),removeChatTyping(e)},8e3)}),socket.on("typing",function(e){jQuery.event.trigger({type:"bleeper_typing",ndata:e})}),socket.on("stop typing",function(e){jQuery.event.trigger({type:"bleeper_stop_typing",ndata:e})}),socket.on("chatID",function(e){Cookies.set("wplc_cid",e.chatid,{expires:1,path:"/"}),wplc_cid=e.chatid,nifty_is_chat_open||nifty_init_chat_box_check(e.chatid)}),socket.on("involved check returned",function(e){jQuery.event.trigger({type:"bleeper_build_involved_agents_header",ndata:e})}),socket.on("disconnect",function(){"undefined"!=typeof user_heartbeat&&clearInterval(user_heartbeat),user_heartbeat=void 0,t&&jQuery.event.trigger({type:"bleeper_disconnected"})}),socket.on("reconnect",function(){t&&jQuery.event.trigger({type:"bleeper_reconnect"}),nc_add_user(socket,"what the shizz")}),socket.on("reconnect_error",function(){jQuery.event.trigger({type:"bleeper_reconnect_error"})}),socket.on("blip",function(e){blip_trigger(e)}),socket.on("blips",function(e){blip_sort_queue(e)})},$messages=jQuery("#wplc_chatbox"),$inputMessage=jQuery("#wplc_chatmsg"),jQuery("#nifty_file_input").on("change",function(){niftyShareFile(this.files[0],"#nifty_attach_fail_icon","#nifty_attach_success_icon","#nifty_attach_uploading_icon","#nifty_select_file"),jQuery("#chat_drag_zone").fadeOut()}),document.getElementById("wplc_chatmsg").onpaste=function(e){for(var t=(e.clipboardData||e.originalEvent.clipboardData).items,n=null,i=0;i<t.length;i++)0===t[i].type.indexOf("image")&&(n=t[i].getAsFile());if(null!==n){var r=new FileReader;r.onload=function(e){document.getElementById("wplc_chatmsg").value="####"+e.target.result+"####",jQuery("#wplc_send_msg").click(),jQuery("#bleeper_send_msg").click()},r.readAsDataURL(n)}},jQuery("#nifty_tedit_b").click(function(){niftyTextEdit("b")}),jQuery("#nifty_tedit_i").click(function(){niftyTextEdit("i")}),jQuery("#nifty_tedit_u").click(function(){niftyTextEdit("u")}),jQuery("#nifty_tedit_strike").click(function(){niftyTextEdit("strike")}),jQuery("#nifty_tedit_mark").click(function(){niftyTextEdit("mark")}),jQuery("#nifty_tedit_sub").click(function(){niftyTextEdit("sub")}),jQuery("#nifty_tedit_sup").click(function(){niftyTextEdit("sup")}),jQuery("#nifty_tedit_link").click(function(){niftyTextEdit("link")}),setInterval(function(){getText(document.getElementById("wplc_chatmsg"))},1e3),sid=nc_getCookie("nc_sid"),nifty_chat_status_temp=nc_getCookie("nc_status"),"undefined"!==nifty_chat_status_temp&&(nifty_chat_status=nifty_chat_status_temp),chatid=nc_getCookie("wplc_cid"),"undefined"!==chatid&&(wplc_cid=chatid,nc_name=nc_getCookie("nc_username")),wplc_online&&bleeper_ping_servers(function(e){if(NIFTY_SOCKET_URI="undefined"!=typeof bleeper_end_point_override?bleeper_end_point_override:"undefined"!=typeof bleeper_server_location?bleeper_server_list[parseInt(bleeper_server_location)]:bleeper_server_list[e],window.console&&console.log("[Bleeper] Connecting to "+NIFTY_SOCKET_URI),"undefined"!=typeof io)socket=io.connect(NIFTY_SOCKET_URI,{query:query_string,transports:["websocket"]});else var t=setInterval(function(){"undefined"!=typeof io&&(clearInterval(t),socket=io.connect(NIFTY_SOCKET_URI,{query:query_string,transports:["websocket"]}))},1e3);nifty_chat_delegates()}),nifty_connect=function(e){!1===bleeper_inactive?void 0!==socket&&socket.connected||(socket=io.connect(NIFTY_SOCKET_URI,{query:query_string,transports:["websocket"]}),nifty_chat_delegates(e)):setTimeout(function(){socket.connected||nifty_connect(!1)},7e3)};jQuery(window);jQuery(document).on("mousemove",function(){clearTimeout(bleeper_inactive_timeout),bleeper_inactive=!1,bleeper_inactive_timeout=setTimeout(function(){bleeper_inactive=!0},bleeper_timeout_duration)}),jQuery(document).on("bleeper_send_message",function(e){socket.emit("stop typing",{chatid:wplc_cid}),niftyIsEditing=typing=!1}),jQuery(document).on("keydown","#wplc_chatmsg",function(e){if(13!==e.which||e.shiftKey){if(38!==e.which||e.shiftKey)27!==e.which||e.shiftKey||(jQuery("#wplc_chatmsg").val(""),niftyIsEditing=!1);else if(void 0!==lastmessagesent&&"undefined"!=typeof bleeper_integration_pro_active&&"true"===bleeper_integration_pro_active){var t=lastmessagesent,n=jQuery(".message_"+t+" .messageBody").html();jQuery("#wplc_chatmsg").val(n),niftyIsEditing=t}}else""!==jQuery(this).val().trim()&&(e.preventDefault(),jQuery("#wplc_send_msg").click(),jQuery("#bleeper_send_msg").click())}),$inputMessage.keyup(function(e){if(13!==e.which||e.shiftKey){var t=cleanInput($inputMessage.val());socket.emit("typing_preview",{chatid:wplc_cid,tempmessage:t})}else;}),$inputMessage.on("input",function(){updateTyping()}),$inputMessage.click(function(){$inputMessage.focus()}),jQuery(document).on("mouseleave",".message",function(){var e=jQuery(this).attr("mid");jQuery(".message_"+e+" .bleeper-edit-message").hide()}),jQuery(document).on("mouseenter",".message",function(){var e=jQuery(this).attr("mid");jQuery(".message_"+e+" .bleeper-edit-message").show()}),jQuery(document).on("click",".bleeper_restart_chat",function(){ wplc_is_chat_open = true;
jQuery.event.trigger({type: "wplc_open_chat"}), jQuery("#wp-live-chat-4").hide(); jQuery("#wp-live-chat-1").show() }),jQuery(document).on("click","#bleeper_send_msg",function(){if(nifty_chat_status_temp=nc_getCookie("nc_status"),"browsing"===nifty_chat_status_temp){jQuery.event.trigger({type:"nifty_trigger_start_chat"});var e=new Date;e.setTime(e.getTime()+12e4),niftyUpdateStatusCookie("active"),jQuery("#bleeper-welcome").hide(),nifty_connect(!0);var t=setInterval(function(){void 0!==socket&&void 0!==socket.connected&&!0===socket.connected&&(clearInterval(t),socket.emit("request chat",{chatid:wplc_cid,name:"Guest",email:"noemail@guest"}))},300);sendMessage($inputMessage.val())}else{sendMessage($inputMessage.val())}}),jQuery(document).on("click","#wplc_send_msg",function(){sendMessage($inputMessage.val())}),jQuery(document).on("click",".bleeper-edit-message",function(){var e=jQuery(this).parent().attr("mid"),t=jQuery(this).siblings(".messageBody").attr("data-message");jQuery("#wplc_chatmsg").val(t),niftyIsEditing=e})}),jQuery(document).on("nifty_trigger_open_chat",function(e){open_chat(),jQuery("#bleeper_chat_ended").hide()}),jQuery(document).on("bleeper_socket_connected",function(e){void 0!==socket&&void 0!==nifty_chat_status&&"active"===nifty_chat_status&&socket.emit("check involved agents",{chatid:chatid})}),jQuery(document).on("wplc_animation_done",function(e){"undefined"!=typeof wdtEmojiBundle&&(wdtEmojiBundle.defaults.emojiSheets={apple:"https://bleeper.io/app/assets/wdt-emoji//sheets/sheet_apple_64_indexed_128.png",google:"https://bleeper.io/app/assets/wdt-emoji//sheets/sheet_google_64_indexed_128.png",twitter:"https://bleeper.io/app/assets/wdt-emoji//sheets/sheet_twitter_64_indexed_128.png",emojione:"https://bleeper.io/app/assets/wdt-emoji//sheets/sheet_emojione_64_indexed_128.png",facebook:"https://bleeper.io/app/assets/wdt-emoji//sheets/sheet_facebook_64_indexed_128.png",messenger:"https://bleeper.io/app/assets/wdt-emoji//sheets/sheet_messenger_64_indexed_128.png"},bleeper_attmept_emoji_input_init(0))}),jQuery("#wp-live-chat-minimize").on("click",function(){jQuery.event.trigger({type:"nifty_minimize_chat"}),Cookies.set("nifty_minimize","yes",{expires:1,path:"/"}),nifty_is_minimized=!0}),jQuery("#wplc_start_chat_btn").on("click",function(){var e=jQuery(this).attr("data-wplc-gdpr-enabled");if(void 0!==e&&"true"===e){var t=jQuery("#wplc_chat_gdpr_opt_in").is(":checked");if(void 0===t||!1===t)return jQuery("#wplc_chat_gdpr_opt_in").addClass("incomplete"),!1;jQuery("#wplc_chat_gdpr_opt_in").removeClass("incomplete")}var n=jQuery("#wplc_name").val(),i=jQuery("#wplc_email").val(),
p=jQuery("#wplc_custom_field_1").val();if(n.length<=0)return alert("Please enter your name"),!1;if(i.length<=0)return alert("Please enter your email address"),!1;if(p.length<=0)return alert("Please enter a valid phone number"),!1;if("1"!==jQuery("#wplc_email").attr("wplc_hide")){if(!/^[A-Z0-9._%+-]+@([A-Z0-9-]+\.)+[A-Z]{2,6}$/i.test(i))return alert("Please Enter a Valid Email Address"),!1};if(p!=''){if(!/^[0-9]+$/.test(p)){
    return alert("Please only enter numeric characters! (Allowed input:0-9)")
  } if(p.length!=10){return alert("Please only enter 10 digit numeric characters!")} };jQuery.event.trigger({type:"nifty_trigger_start_chat"});var r=new Date;r.setTime(r.getTime()+12e4),niftyUpdateUserDataCookies(n,i),niftyUpdateGravCookie(md5(i)),niftyUpdateStatusCookie("active"),nifty_connect(!0);var s=setInterval(function(){void 0!==socket&&void 0!==socket.connected&&!0===socket.connected&&(clearInterval(s),socket.emit("request chat",{chatid:wplc_cid,name:n,email:i}))},300)});var open_chat=function(e){nifty_is_minimized=!1,nifty_chat_status_temp=nc_getCookie("nc_status"),wplc_chat_status_temp=nc_getCookie("wplc_chat_status"),"active"===nifty_chat_status_temp?(niftyUpdateStatusCookie("active"),nifty_connect(!0),jQuery.event.trigger({type:"nifty_trigger_open_chat_2",wplc_online:wplc_online}),nifty_is_chat_open=!0):"browsing"!==nifty_chat_status_temp&&"5"!==wplc_chat_status_temp||!1===jQuery("#wp-live-chat-2").is(":visible")&&!1===jQuery("#wp-live-chat-4").is(":visible")&&(jQuery("#wp-live-chat-2").show(),jQuery("#wp-live-chat-header").addClass("active"))};function niftyPrepareVideoContainer(){"function"==typeof NiftyVideoChat?(nifty_user_video_client=NiftyVideoChat,nifty_user_video_client.generateUserContainers(),nifty_user_video_client.setup("nifty_user_chat_video_local","nifty_user_chat_video_remote")):setTimeout(niftyPrepareVideoContainer,1e3)}function niftyVideoProcessIncomingData(e){if(niftyVideoContainerOpen||(niftyVideoShowContainer(),niftyVideoContainerOpen=!0),"function"==typeof nifty_user_video_client)for(var t in e)nifty_user_video_client.process(e[t],function(e){niftyVideoDataQueue.push(e)})}function niftyVideoShowContainer(){jQuery("#nifty_user_chat_video_box").fadeIn()}function niftyVideoHideContainer(){jQuery(".nifty_user_chat_video_box").fadeOut()}function niftyNextVideoData(){null==niftySendVideoData&&0<niftyVideoDataQueue.length&&(niftySendVideoData=niftyVideoDataQueue.shift())}function getText(e){checkSelection&&(selectedIndexStart!==e.selectionStart&&(selectedIndexStart=e.selectionStart),selectedIndexEnd!==e.selectionEnd&&(selectedIndexEnd=e.selectionEnd))}function niftyTextEdit(e){if(void 0!==selectedIndexStart&&void 0!==selectedIndexEnd){checkSelection=!1,jQuery("#wplc_chatmsg").focus();var t=jQuery("#wplc_chatmsg").val();t=t.substr(0,0<selectedIndexStart?selectedIndexStart:0)+e+":"+t.substr(selectedIndexStart,selectedIndexEnd-selectedIndexStart)+":"+e+t.substr(selectedIndexEnd<t.length?selectedIndexEnd:t.length,t.length),jQuery("#wplc_chatmsg").val(t),checkSelection=!0}}function niftyShareFile(e,r,s,o,a){var t=new FormData;t.append("file",e),t.append("timestamp",Date.now()),jQuery(o).show(),jQuery(a).hide(),jQuery(s).hide(),jQuery(r).hide();var n="https://bleeper.io/app/upload-file.php";n="undefined"!=typeof bleeper_override_upload_url&&""!==bleeper_override_upload_url?bleeper_override_upload_url:n,-1===e.name.indexOf(".php")&&-1===e.name.indexOf(".html")&&-1===e.name.indexOf(".asp")&&-1===e.name.indexOf(".svg")?e.size<4e6?jQuery.ajax({url:n,type:"POST",data:t,cache:!1,processData:!1,contentType:!1,success:function(e){if(0!==parseInt(e)){jQuery(o).hide(),jQuery(s).show(),setTimeout(function(){jQuery(s).hide(),jQuery(a).show()},2e3);var t=!1;if(bleeperIsJson(e)){var n=JSON.parse(e);t=void 0!==n.response?n.response:e}else t="object"!=typeof e?e:void 0!==e.response?e.response:e;if(!1!==t){var i=-1!==t.indexOf(".png")||-1!==t.indexOf(".PNG")||-1!==t.indexOf(".jpg")||-1!==t.indexOf(".JPG")||-1!==t.indexOf(".jpeg")||-1!==t.indexOf(".JPEG")||-1!==t.indexOf(".gif")||-1!==t.indexOf(".GIF")||-1!==t.indexOf(".bmp")||-1!==t.indexOf(".BMP")?"img":"link";"img"!==i&&(i=-1!==t.indexOf(".mp4")||-1!==t.indexOf(".mpeg4")||-1!==t.indexOf(".webm")||-1!==t.indexOf(".oog")?"video":"link"),jQuery("#wplc_chatmsg").val(i+":"+t+":"+i),jQuery("#wplc_send_msg").trigger("click"),jQuery("#bleeper_send_msg").trigger("click"),setTimeout(function(){$messages[0].scrollTop=$messages[0].scrollHeight},1e3)}}else jQuery(o).hide(),jQuery(r).show(),setTimeout(function(){jQuery(r).hide(),jQuery(a).show()},2e3)},error:function(){jQuery(o).hide(),jQuery(r).show(),setTimeout(function(){jQuery(r).hide(),jQuery(a).show()},2e3)}}):(alert("File limit is 4mb"),jQuery(o).hide(),jQuery(r).show(),setTimeout(function(){jQuery(r).hide(),jQuery(a).show()},2e3)):(alert("File type not supported"),jQuery(o).hide(),jQuery(r).show(),setTimeout(function(){jQuery(r).hide(),jQuery(a).show()},2e3))}var niftyFormatParser=function(e){var t=!1;-1!==(e=e.replace(/link:(.+?):link/g,"$1")).indexOf("video:")&&(e=e.replace(/video:/g,"<video style='background-color: black; max-width:100%;' src='"),t=!0),-1!==e.indexOf(":video")&&(e=e.replace(/:video/g,"' controls></video>"),t=!0),-1!==e.indexOf("mark:")&&(e=e.replace(/mark:/g,"<mark>")),-1!==e.indexOf(":mark")&&(e=e.replace(/:mark/g,"</mark>")),-1!==e.indexOf("strike:")&&(e=e.replace(/strike:/g,"<del>")),-1!==e.indexOf(":strike")&&(e=e.replace(/:strike/g,"</del>")),-1!==e.indexOf("sub:")&&(e=e.replace(/sub:/g,"<sub>")),-1!==e.indexOf(":sub")&&(e=e.replace(/:sub/g,"</sub>")),-1!==e.indexOf("sup:")&&(e=e.replace(/sup:/g,"<sup>")),-1!==e.indexOf(":sup")&&(e=e.replace(/:sup/g,"</sup>")),-1!==e.search(/\:(\S+)(\:)(\S+)\:/g)&&(e=e.replace(/\:(\S+)(\:)(\S+)\:/g,function(e,t,n,i){return[":",t,"::",i,":"].join("")}));var n,i=(e=bleeper_emoji_render(e)).match(/_([^*]*?)_/g);if(null!==i)for(var r=0,s=i.length;r<s;r++){var o=(l=i[r]).substring(1,l.length-1);e=e.replace(l,"<em>"+o+"</em>")}if(null!==(n=e.match(/img:([^*]*?):img/g)))for(r=0,s=n.length;r<s;r++){o=(l=n[r]).substring(4,l.length-4);e=e.replace(l,"<img style='max-width:100%;' src='"+bleeper_url_path_em_stripper(o.replace("::",":"))+"' />"),t=!0}if(null!==(n=e.match(/####([^*]*?)####/g)))for(r=0,s=n.length;r<s;r++){o=(l=n[r]).substring(4,l.length-4);e=e.replace(l,"<img src='"+bleeper_url_path_em_stripper(o)+"' />"),t=!0}var a=e.match(/\*\s*([^*]*?)\s*\*/g);if(null!==a)for(r=0,s=a.length;r<s;r++){o=(l=a[r]).substring(1,l.length-1);e=e.replace(l,"<strong>"+o+"</strong>")}var c=e.match(/```([^*]*?)```/g);if(null!==c)for(r=0,s=c.length;r<s;r++){o=(l=c[r]).substring(3,l.length-3);e=e.replace(l,"<pre>"+o+"</pre>")}var _=e.match(/`([^*]*?)`/g);if(null!==_)for(r=0,s=_.length;r<s;r++){var l;o=(l=_[r]).substring(1,l.length-1);e=e.replace(l,"<code>"+o+"</code>")}return e=e.replace(/\n/g,"<br />"),!1===t&&(e=bleeper_inline_link_generator(e)),e};function bleeper_end_chat_div_create(){jQuery("<a/>",{class:"bleeper_restart_chat",href:"javascript:void(0);",title:"Restart chat",html:"Restart chat"}).appendTo("#bleeper_chat_ended")}function bleeper_emoji_render(e){return"undefined"!=typeof wdtEmojiBundle&&(e=wdtEmojiBundle.render(e)),e}function nc_add_user(e,t){t={};chatid=nc_getCookie("wplc_cid"),"undefined"!=typeof chatid&&(wplc_cid=chatid,nc_name=nc_getCookie("nc_username"),wplc_name=nc_getCookie("wplc_name")),"undefined"!=typeof chatid?(void 0!==nc_name?t.username=nc_name:"undefined"!=typeof wplc_name?t.username=wplc_name:t.username="Guest",t.api_key=bleeper_api_key,t.wplc_cid=chatid):(t.username="Guest",t.api_key=bleeper_api_key,t.wplc_cid=null),t.date_first=bleeper_first,t.date_current=bleeper_current,t.timezoneUTC=bleeper_get_timezone(),t.device_in_use=bleeper_get_device_in_use(),t.operating_system=bleeper_get_operating_system(),void 0!==bleeper_location_info&&!1!==bleeper_location_info&&(t.location_info=bleeper_location_info),nc_status=nc_getCookie("nc_status"),"undefined"!=typeof nc_status&&"browsing"!==nc_status||(t.connectiontype="short"),e.emit("add user",t)}function nc_getCookie(e){var t=("; "+document.cookie).split("; "+e+"=");if(2==t.length)return t.pop().split(";").shift()}function nifty_init_chat_box_check(e){"function"==typeof wplc_init_chat_box?wplc_init_chat_box(e):"undefined"!=typeof wplc_init_chat_box&&!1!==wplc_init_chat_box&&setTimeout(function(){nifty_init_chat_box_check(e)},500)}function bleeperIsJson(e){try{JSON.parse(e)}catch(e){return!1}return!0}function bleeper_test_localStorage(){if("undefined"==typeof localStorage)return!1;try{return localStorage.setItem("bleeper_test","yes"),"yes"===localStorage.getItem("bleeper_test")&&(localStorage.removeItem("bleeper_test"),!0)}catch(e){return!1}}function bleeper_get_timezone(){var e=(new Date).getTimezoneOffset(),t=Math.floor(e/60);return 0<t?"-"+t:t<0?t.toString().replace("-","+"):"0"}function bleeper_get_device_in_use(){return jQuery(window).width()<900?"mobile":"desktop"}var bleeper_user_current_os=!1;function bleeper_get_operating_system(){if(!1===bleeper_user_current_os&&"undefined"!=typeof navigator&&"undefined"!==navigator.userAgent){var e=navigator.userAgent,t=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var n in t){var i=t[n];if(i.r.test(e))return bleeper_user_current_os=i.s}return bleeper_user_current_os="Unknown"}return bleeper_user_current_os}var bleeper_link_match_regex=/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!,.;<>]*[-A-Z0-9+&@#\/%=~_|<>])/gi;function bleeper_inline_link_generator(e){return e.replace(bleeper_link_match_regex,function(e){return-1===e.indexOf("wdt-emoji")?'<a href="'+(e=bleeper_url_path_em_stripper(e))+'" target="_BLANK">'+bleeper_attachment_label_filter(e)+"</a>":e=bleeper_url_path_em_stripper(e)})}function bleeper_url_path_em_stripper(e){return-1!==e.indexOf("<em>")&&(e=e.replace(/<em>/g,"_")),-1!==e.indexOf("</em>")&&(e=e.replace(/<\/em>/g,"_")),e}var bleeper_file_suffix_check=["zip","pdf","txt","mp3","mpa","ogg","wav","wma","7z","rar","db","xml","csv","sql","apk","exe","jar","otf","ttf","fon","fnt","ai","psd","svg","tif","tiff","ps","msi","doc","docx"];function bleeper_attachment_label_filter(e){var t=e.split(".").pop();for(var n in t=t.toLowerCase(),bleeper_file_suffix_check)if(t===bleeper_file_suffix_check[n])return"Attachment";return e}function bleeper_pinger(e,n,i){var r=(new Date).getTime();jQuery.ajax({url:e+"/api/v1/ping",success:function(e){if(void 0!==e&&"pong"===e){var t=(new Date).getTime()-r;i(t,n)}else i(!1,n)},error:function(e){i(!1,n)},timeout:3500})}function bleeper_ping_servers(e){bleeper_test_sessionStorage()&&null!==sessionStorage.getItem("bleeper_closest_server")?e(parseInt(sessionStorage.getItem("bleeper_closest_server"))):bleeper_iterate_through_servers(e)}function bleeper_iterate_through_servers(n){var i=bleeper_server_list.length,r=1e4,s=0,o=0;for(k in bleeper_server_list)if(bleeper_server_list.hasOwnProperty(k))bleeper_pinger(bleeper_server_list[k],k,function(e,t){o+=1,!1!==(bleeper_server_list_results[t]=e)&&e<r&&(r=e,s=t),i<=o&&(bleeper_test_sessionStorage()&&sessionStorage.setItem("bleeper_closest_server",s),n(s))})}function bleeper_test_sessionStorage(){if("undefined"==typeof sessionStorage)return!1;try{return sessionStorage.setItem("bleeper_test","yes"),"yes"===sessionStorage.getItem("bleeper_test")&&(sessionStorage.removeItem("bleeper_test"),!0)}catch(e){return!1}}function bleeper_attmept_emoji_input_init(t){try{wdtEmojiBundle.init(".wdt-emoji-bundle-enabled")}catch(e){t<5&&(t++,setTimeout(function(){bleeper_attmept_emoji_input_init(t)},1e3))}}function bleeper_query_cleanup(e){return"&"===e.charAt(0)&&(e=e.substring(1)),e}function Bleeper_IsJsonString(e){try{JSON.parse(e)}catch(e){return!1}return!0}function blip_trigger(e){if(blip_check_allowed()){console.log(e),Bleeper_IsJsonString(e)&&(e=JSON.parse(e)),blip_add_to_queue(e);new Date;var t="blip_"+e.bid,n=document.createElement("div");n.setAttribute("id",t),document.body.appendChild(n);var i="";if(void 0!==e.timenow&&void 0!==e.bid&&(i=bleeper_timeSince(e.timenow,e.bid)+" ago."),void 0!==e.h)var r="<h2>"+e.h+"</h2>";else{r="";n.className+=" notitle"}var s=e.m.match(/[^{}]*(?=\})/g);console.log(s),s&&(e.m=e.m.replace(/\{blip-marketing-type}/gi,"signed up"),e.m=e.m.replace(/\{blip-conversion-type}/gi,"users"),i=""),n.innerHTML='<a href="#" class="blip-close-thin"></a><div class="blipleft"><img class="blip_image" src="'+e.i+'"></div><div class="blipright">'+r+"<p>"+e.m+' <span class="blip-timeago">'+i+'</span></p></div><span class="blippower"><a href="https://bleeper.io/blip/" rel="nofollow"><img class="blip-powered-img" src="https://bleeper.io/app/assets/images/bleeper-red.png" border="0" alt="Increase Conversions with Bleeper!" title="Bleeper"/></a></span></div>';var o=blip_addStyleString("#"+t+' { transition: all 1s; font-family: "Sansation"; position:fixed; bottom:-100px; width: 320px; margin: 0 0 10px 10px; border-radius: 5px; box-shadow: 0 0 1px rgba(0,0,0,.2), 0 1px 2px rgba(0,0,0,.05), 0 8px 50px rgba(0,0,0,.05); pointer-events: auto; overflow: hidden; height: 90px; background-color: #fff; padding: 10px; box-sizing: border-box; line-height: 1em; }');setTimeout(function(){n.classList.add("blipopen")},100),setTimeout(function(){n.classList.remove("blipopen")},1e4),setTimeout(function(){document.body.removeChild(n),document.body.removeChild(o)},11e3),blip_queue[e.bid].displayed=!0}}function blip_addStyleString(e){var t=document.createElement("style");return t.innerHTML=e,document.body.appendChild(t),t}var blip_timer=!1;function blip_check_allowed(){return bleeper_test_sessionStorage()?"false"!==sessionStorage.getItem("bleeper_blip_show"):"false"!==Cookies.get("bleeper_blip_show")}if(blip_check_allowed())blip_timer=setInterval(function(){blip_next()},25e3);function blip_next(){if(blip_check_allowed())for(k in blip_queue)if(void 0!==blip_queue[k].bid&&void 0!==blip_queue[k].displayed&&!1===blip_queue[k].displayed){blip_trigger(blip_queue[k]);break}}var blip_queue={};function blip_add_to_queue(e){void 0===blip_queue[e.bid]&&(blip_queue[e.bid]=e,blip_queue[e.bid].displayed=!1)}function blip_sort_queue(e){for(k in e)e[k]=JSON.parse(e[k]),blip_add_to_queue(e[k])}function bleeper_powered_by(){if("undefined"==typeof bleeper_integration_pro_active){var e='<span class="bleeper_powered_by"><i title="Powered by" class="fa fa-bolt"></i> <a title="Powered by WP Live Chat Support" href="https://wp-livechat.com/?utm_source=powered&utm_medium=poweredby&utm_campaign='+window.location.hostname+'" target="_BLANK" rel="nofollow" class="wplc-color-1">WP Live Chat Support</a><span></span></span>';jQuery("#wp-live-chat-4").length&&jQuery("#wp-live-chat-4").append(e),jQuery("#wp-live-chat-2").length&&jQuery("#wp-live-chat-2").append(e),jQuery(".bleeper_powered_by").css("position","absolute"),jQuery(".bleeper_powered_by").css("padding-left","10px"),jQuery(".bleeper_powered_by").css("bottom","-82px"),jQuery(".bleeper_powered_by").css("font-size","10px"),jQuery(".bleeper_powered_by").css("font-family","Roboto, sans-serif"),jQuery(".bleeper_powered_by a").css("color","#adadad"),jQuery(".bleeper_powered_by a").css("font-weight","700"),jQuery(".bleeper_powered_by a").css("color","#989898"),jQuery(".classic .bleeper_powered_by").css("bottom","0px"),jQuery(".classic #wplc_user_message_div").css("margin-bottom","10px"),jQuery("#wp-live-chat-2 .bleeper_powered_by").css("bottom","0px"),jQuery(".bleeper_powered_by").css("left","0px")}}function bleeper_timeSince(e,t){var n=Math.floor((e-t)/1e3),i=Math.floor(n/31536e3);return 1<i?i+" years":1<(i=Math.floor(n/2592e3))?i+" months":1<(i=Math.floor(n/86400))?i+" days":1<(i=Math.floor(n/3600))?i+" hours":1<(i=Math.floor(n/60))?i+" minutes":Math.floor(n)+" seconds"}jQuery(document).on("click",".blip-close-thin",function(){jQuery(".blipopen").hide(),clearInterval(blip_timer),bleeper_test_sessionStorage()?sessionStorage.setItem("bleeper_blip_show",!1):Cookies.set("bleeper_blip_show",!1,{expires:1,path:"/"})});